function openNotification(e){notyfy({timeout:void 0!=e.timeout?e.timeout:5e3,text:e.text,type:e.type,dismissQueue:!0,layout:e.layout})}function sendForm(e){var t=!0;if(void 0!==files&&files.length>0&&$.each(files,function(e,i){void 0!==i.textStatus&&"success"===i.textStatus||(t=!1)}),t){var i=$(e).find('[type="submit"]'),a=i.data("original");if(i.focus(),$(":focus").trigger("blur"),"undefined"!=typeof CKEDITOR)for(var n in CKEDITOR.instances)CKEDITOR.instances[n].updateElement();$.ajax({type:"POST",url:$(e).prop("action"),data:$(e).serialize(),dataType:"json",success:function(t){openNotification({layout:"top",text:t.redirect?t.message+" "+i18n.clique+' <a href="'+site_url+t.redirectModule+'">'+i18n.aqui+"</a> "+i18n.ir_listagem:t.message,type:t.classe}),t.status?t.redirect?(i.html(i18n.redirecionando).removeClass("loading btn-primary").addClass("btn-success btn-stroke"),setTimeout(function(){window.location=site_url+t.redirectModule},2e3)):t.download?($(e).removeClass("sending").data("sending",!1),i.html(a).removeClass("btn-success btn-stroke").addClass("btn-primary").removeAttr("disabled"),window.location=t.download):setTimeout(function(){$(e).removeClass("sending").data("sending",!1),i.html(a).removeClass("btn-success btn-stroke").addClass("btn-primary").removeAttr("disabled")},2e3):($.each(files,function(e){files[e].abort(),files[e].textStatus=""}),$(e).removeClass("sending").data("sending",!1),i.html(a).removeClass("loading").removeAttr("disabled"))}})}}function sendFormError(e,t){e.currentElements.parents("label:first, div:first").find(".has-error").remove(),e.currentElements.parents(".form-group:first").removeClass("has-error"),$.each(t,function(e,t){var i=$(t.element),a=i.parents("label:first").length?i.parents("label:first"):i.parents("div:first");i.parents(".form-group:first").addClass("has-error"),a.find(".has-error").remove(),a.append('<p class="has-error help-block">'+t.message+"</p>")})}function progressImage(e,t){var i=parseInt(e.loaded/e.total*100,10);t.width(i+"%"),100==i&&t.addClass("complete").delay(2e3).animate({height:0},300,function(){t.removeClass("complete").css({width:0,height:5})})}function doneImage(e,t,i,a,n){var o=t.find(".upload-image"),r=t.find('label[for="fileuploadImage"]');e.autoUpload?(e.jqXHR.responseJSON.status&&(o.find("img").attr("src",site_url+"image/resize_crop?src=userfiles/avatar/"+e.jqXHR.responseJSON.image+"&w=200&h=200"),$(".delete-image").removeClass("hide").hide().slideDown().attr("href",n+"/"+e.jqXHR.responseJSON.image)),setTimeout(function(){r.html(i18n.alterar_imagem).removeAttr("disabled")},400),openNotification({layout:"top",text:e.jqXHR.responseJSON.message,type:e.jqXHR.responseJSON.classe})):(i.append('<input type="hidden" name="'+a+'" value="'+e.jqXHR.responseJSON.image+'" />'),sendForm(i[0]),setTimeout(function(){r.html(i18n.alterar_imagem).removeAttr("disabled")},400))}function processImage(e,t){e.autoUpload&&(t.find('label[for="fileuploadImage"]').attr("disabled","disabled").html('<i class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></i>'),e.submit())}function updateCKEditor(e){if("undefined"!=typeof CKEDITOR)if(void 0===e)for(var t in CKEDITOR.instances)updateCKEditorIndividual(CKEDITOR.instances[t]);else updateCKEditorIndividual(e)}function updateCKEditorIndividual(e){e.on("resize",function(){$(".layout-app .hasNiceScroll").getNiceScroll().resize()}),e.on("change",function(){this.updateElement()}),e.on("blur",function(){this.updateElement()})}!function(e){"use strict";var t=function(){return this.system="cms",this.__constructor()};t.prototype.__constructor=function(){return this.ajax(),this},t.prototype.ajax=function(){$.ajaxSetup({statusCode:{401:function(){openNotification({layout:"top",text:i18n.sessao_fechada,type:"error"}),setTimeout(function(){e.location.href=site_url},1e4)}}}),$(document).ajaxError(function(){openNotification({layout:"top",text:i18n.erro_inesperado,type:"error",timeout:6500}),$.each(files,function(e){files[e].abort(),files[e].textStatus=""}),$("#validateSubmitForm").length&&($("#validateSubmitForm").removeClass("sending").data("sending",!1),$("#validateSubmitForm").find('[type="submit"]').html($("#validateSubmitForm").find('[type="submit"]').data("original")).removeClass("loading").removeAttr("disabled"))})},e.Exceptions=new t}(window),$(window).load(function(){updateCKEditor()}),function(e){"use strict";var t=function(){this.system="cms",this.host=e.document.location.host,this.hostname=e.document.location.hostname};t.prototype.redirect=function(t){e.location.href=t},t.prototype.segments=function(t){var i=e.document.location.pathname.replace(/(^\/|\/$)/g,""),a=String(i).split("/"),n=a.indexOf(this.system)+1;return a=a.slice(n,a.length),void 0!==typeof t?a[t]:a},e.Url=new t}(window),function(e){function t(e){"use strict";var t=this;t.data={1:{}},t.currentLang=1,t.mainElement,t.table=function(){return $(t.mainElement).find('table[data-lang="'+t.currentLang+'"]')},t.tableElementHead=function(){return t.table().find("thead")},t.tableElementBody=function(){return t.table().find("tbody")},t.init=function(e){t.mainElement=e,t.initEvents(),t.buidData(),t.toggleAddLine()},t.initEvents=function(){$(t.mainElement).find(".multilang-drop .dropdown-menu li a").click(function(){var e=this.innerHTML+'<span class="caret"></span>';$(t.mainElement).find(".multilang-drop-view").html(e),t.changeLang($(this).data("lang"))}),$(t.mainElement).find(".add-line").click(function(){t.addLine()}),$(t.mainElement).find(".add-column").click(function(){t.addColumn(),t.toggleAddLine()}),$(t.mainElement).find(".clear-table").click(function(){t.clearTable(!0),t.toggleAddLine()}),$(document).on("click","thead tr th span",function(){t.removeColumn($(this).parents("th"))}),$(document).on("click","tbody tr td span",function(){t.removeLine($(this).parents("tr"))})},t.getColumnsCount=function(){return t.data[t.currentLang]&&t.data[t.currentLang].columns?t.data[t.currentLang].columns:0},t.getRowsCount=function(){return t.data[t.currentLang]&&t.data[t.currentLang].rows?t.data[t.currentLang].rows:0},t.toggleAddLine=function(){$(t.mainElement).find(".add-line").attr("disabled",!t.getColumnsCount())},t.getNextColumn=function(){return t.tableElementHead().find("th").length?Math.max.apply(Math,Array.from(t.tableElementHead().find("th"),function(e){return parseInt(e.dataset.column)}))+1:1},t.getNextLine=function(){return t.tableElementBody().find("tr").length?Math.max.apply(Math,Array.from(t.tableElementBody().find("tr"),function(e){return parseInt(e.dataset.line)}))+1:1},t.addColumn=function(){var e=t.getNextColumn(),i="table[langs]["+t.currentLang+"][columns]["+e+"]",a=$('<th data-column="'+e+'"><input name="'+i+'[title]" placeholder="Clique para Editar"><input type="hidden" name="'+i+'[order_by]"><span></span></th>');t.getColumnsCount()||t.tableElementHead().find("tr").length||t.tableElementHead().append('<tr data-line="0">'),t.tableElementHead().find("tr").append(a),t.tableElementBody().find("tr").each(function(e){$(this).append($('<td><input name="'+i+"[rows]["+$(this).data("line")+'][title]"><input type="hidden" name="'+i+"[rows]["+$(this).data("line")+'][order_by]"><span></span></td>'))}),t.getColumnsCount()?t.data[t.currentLang].columns++:t.data[t.currentLang]={columns:1}},t.addLine=function(){for(var e=t.getNextLine(),i=$('<tr data-line="'+e+'">'),a=0;a<t.getColumnsCount();a++){var n=t.tableElementHead().find("tr th:nth-child("+(a+1)+")"),o="table[langs]["+t.currentLang+"][columns]["+n.data("column")+"][rows]["+e+"]";i.append($('<td><input name="'+o+'[title]"><input type="hidden" name="'+o+'[order_by]"><span></span></td>'))}t.tableElementBody().append(i),t.getRowsCount()?t.data[t.currentLang].rows++:t.data[t.currentLang].rows=1},t.removeLine=function(e){$(e).remove(),t.data[t.currentLang].rows--},t.removeColumn=function(e){var i=$(e).parents("tr").find("th").index(e);$(e).remove(),t.tableElementBody().find("tr td:nth-child("+(i+1)+")").remove(),t.data[t.currentLang].columns--,t.toggleAddLine()},t.clearTable=function(){t.tableElementBody().empty(),t.tableElementHead().empty(),t.data[t.currentLang]={}},t.buidData=function(){$(t.mainElement).find("table[data-lang]").each(function(){t.data[$(this).data("lang")]={columns:$(this).find("thead tr th").size(),rows:$(this).find("tbody tr").size()}})},t.changeLang=function(e){t.table().hide(),t.currentLang=e,t.table().show(),t.toggleAddLine()},t.init(e)}var i=function(){return this.basePath="",this.commonPath="../assets/",this.rootPath="../",this.DEV=!1,this.componentsPath="../assets/components/",this.layoutApp=!1,this.module=module,this.primaryColor="#5BC0DE",this.dangerColor="#bd362f",this.successColor="#8bbf61",this.infoColor="#4193d0",this.warningColor="#ab7a4b",this.inverseColor="#424242",this.themerPrimaryColor=this.primaryColor,"localhost"==Url.host||/192\.168\.1/.test(Url.host)?localStorage.debug=!0:delete localStorage.debug,$("body").removeClass("preload"),this.__constructor()};i.prototype.__constructor=function(){var t=this;return this.validateSubmitForm(),this.deleteRegisters(),this.sortPicker(),this.filter(),this.formFilter(),this.pagination(),this.notify(),this.profiler(),this.subMenuFather(),this.select2(),this.menu(),this.sidebar(),this.magnific(),this.changePassword(),this.initTable(),this.initMasks(),this.pastePlainText(),$(e).load(function(){t.inputEditor()}),$(".nav-pills").each(function(e,t){$(t).find("li > a").length<=1&&$(t).addClass("hidden").hide()}),this},i.prototype.multipleSelectTable=function(e,t){var i=$("#"+e);if(0!=i.length){var a=i.find('select[name="select_'+t+'"]'),n=i.find("#"+e+"-table"),o=n.find(".no-selected").next()[0].outerHTML;n.find(".no-selected").next().remove(),a.on("change",function(){var a=$(this).find("option:selected"),r=a.val(),s=a.text().trim();if(r<=0)return!1;if(a.remove(),i.find(".no-selected").is(":visible")&&i.find(".no-selected").hide(),!(n.find('input[name="'+t+"["+r+'][id]"]').length>0)){var l=a.data(),d=o;d=d.replace(new RegExp("{id}","g"),r),d=d.replace(new RegExp("{title}","g"),s),$.each(l,function(e,t){d=d.replace(new RegExp("{"+e+"}","g"),t)}),i.find("#"+e+"-table").append(d)}i.find("#"+e+"-table").sortable("refresh"),$(this).val(null).trigger("change")});var r=function(e,t){return t.children().each(function(){$(this).width($(this).width())}),t};i.find("#"+e+"-table").sortable({axis:"y",containment:"parent",cursor:"move",handle:".handle",helper:r,tolerance:"pointer"}),$("body").on("click","#"+e+" .delete-item",function(t){t.preventDefault(),t.stopPropagation();var n=$(this).data("id"),o=$(this).data("title"),r="";$.each($(this).closest(".selectable").data(),function(e,t){"sortableItem"!=e&&(r+=" data-"+e+'="'+t+'"')}),a.append('<option value="'+n+'"'+r+">"+o+"</option>"),i.find('tr[data-id="'+n+'"]').remove(),1==i.find("#"+e+"-table").find("tr").length&&i.find(".no-selected").show(),i.find("#"+e+"-table").sortable("refresh")})}},i.prototype.customClonable=function(e,t){e=$(e),e.find("button.add").click(function(i){i.preventDefault(),i.stopPropagation();var a=e.find('script[type="text/template"]');if(a.length){var n=0,o=e.find(".list").children();o.length&&(n=parseInt(o.last().data("seq"))+1);var r=$(a[0].innerHTML.replace(/\{key\}/gim,n));e.find(".list").append(r),t()}}),e.on("click",".remove",function(){$(this).parents("[data-seq]").remove()})},i.prototype.removeImage=function(){$("body").on("click",".remove-image",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).closest(".upload-wrapper"),i=t.find('input[type="file"]').attr("name");$.each(files,function(e,t){if(i==t.divId)return files.splice(e,1),!1}),t.find("a.fancybox").removeClass("fancybox").prop("href","#"),t.find(".remove-image").addClass("hide"),t.find('input[type="checkbox"]').prop("checked",!0),t.find(".upload-image").html("<span>"+t.find(".upload-image").data("dim")+"</span>")})},i.prototype.inputEditor=function(e){if(e=e||$(".inputWithCK"),e.length){var t=[{name:"verticalCustomToolbar",groups:["basicstyles"],items:["Bold"]}],i={};i.toolbar=t,i.autoParagraph=!1,i.enterMode=Number(2),i.fillEmptyBlocks=!1,i.basicEntities=!1,e.each(function(e,t){CKEDITOR.inline($(t).attr("id"),i)});for(var a in CKEDITOR.instances)if($("#"+CKEDITOR.instances[a].name).hasClass("inputWithCK")){if(!0===CKEDITOR.instances[a].prevented)continue;CKEDITOR.instances[a].on("key",function(e){13!=e.data.keyCode&&2228237!=e.data.keyCode||(e.cancel(),13==e.data.keyCode&&$("#validateSubmitForm").submit())}),CKEDITOR.instances[a].on("change",function(e){if("undefined"!=typeof CKEDITOR){var t;for(t in CKEDITOR.instances)CKEDITOR.instances[t].updateElement(),$("#"+t).trigger("blur")}}),CKEDITOR.instances[a].prevented=!0}}},i.prototype.colorPicker=function(){setTimeout(function(){$(".colorpickerField").each(function(){var e=$(this);$(this).ColorPicker({onSubmit:function(e,t,i,a){$(a).val(t),$(a).ColorPickerHide()},onBeforeShow:function(){e.ColorPickerSetColor(this.value)},onChange:function(t,i,a){e.val(i)}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)})})},1e3)},i.prototype.initMasks=function(){var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,i,a,n){a.mask(e.apply({},arguments),n)}};$('input[type="phone"]').mask(e,t),$('input[name*="zipcode"]').mask("99999-999"),$('input[name="cnpj"]').mask("99.999.999/9999-99")},i.prototype.magnific=function(e){var t=!0;e=e||$(".magnific:not(.slick-cloned)").parent(),e.each(function(e,i){$(this).magnificPopup({delegate:".magnific:not(.slick-cloned)",type:"image",iframe:{patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=0"}}},tClose:"",mainClass:"mfp-fade",removalDelay:300,disableOn:function(){return t},gallery:{enabled:!0,tPrev:"",tNext:"",tCounter:'<span class="mfp-counter">%curr% / %total%</span>'}})}),$(".slick-slider").on("beforeChange",function(){t=!1}),$(".slick-slider").on("afterChange",function(){t=!0})},i.prototype.profiler=function(){$("#codeigniter_profiler").css("padding","").addClass("menu-on")},i.prototype.subMenuFather=function(){$(".subMenuFather").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest("li.hasSubmenu");t.hasClass("collapse-in")?t.removeClass("collapse-in").find("> ul").css("display","none"):t.addClass("collapse-in").find("> ul").css("display","block"),setTimeout(function(){$("#menu-list").mCustomScrollbar("update")},500)}),$("#menu-list").find(".active").each(function(){$(this).parents("li").children(".subMenuFather").siblings("ul").css("display","block").parent().addClass("collapse-in"),$(this).parents("li").siblings(".collapse-in").children(".subMenuFather").click()})},i.prototype.cropImage=function(){function e(e){$("#modal-crop").find('input[name="crop_x"]').val(e.x),$("#modal-crop").find('input[name="crop_y"]').val(e.y),$("#modal-crop").find('input[name="crop_width"]').val(e.w),$("#modal-crop").find('input[name="crop_height"]').val(e.h)}var t=!1;$(".crop-image").on("click",function(i){var a=(new Date).getTime(),n=$(this).data("imagesite"),o=$(this).closest(".template-upload").data("id");$("#modal-crop").prop("data-id",o),$("#modal-crop .image-crop-holder").addClass("loading"),$("<img/>",{src:site_url+n+"?"+a}).load(function(){var i=$(this);i.addClass("img-responsive"),$("#modal-crop .image-crop-holder").append(i),setTimeout(function(){$("#modal-crop .image-crop-holder").removeClass("loading"),setTimeout(function(){var a=i.width(),o=i.height();$("#modal-crop").find('input[name="image"]').val(n),$("#modal-crop").find('input[name="image_width"]').val(a),$("#modal-crop").find('input[name="image_height"]').val(o),$("#modal-crop").find(".submit").removeAttr("disabled"),i.Jcrop({onChange:e,onSelect:e},function(){t=this,t.setOptions({bgFade:!0}),t.setSelect([a/4,o/4,a/4+a/2,o/4+o/2]),t.ui.selection.addClass("jcrop-selection")})},500)},50)})}),$("#modal-crop").on("hidden.bs.modal",function(e){0!=t&&t.destroy(),$("#modal-crop .image-crop-holder img").remove(),$("#modal-crop").find('input[type="hidden"]').val(""),$("#modal-crop").find(".submit").attr("disabled","disabled")}),$("#modal-crop").on("click",".crop-cancel",function(e){e.preventDefault(),$("#modal-crop .close").trigger("click")}),$("body").on("click","#modal-crop form button.submit",function(){var e=$("#modal-crop form");$(e).find(".submit").attr("disabled","disabled").html('<i class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></i>').addClass("loading"),$.ajax({type:"POST",url:$(e).attr("action"),data:$(e).serialize(),dataType:"json",complete:function(){$(e).find(".submit").removeAttr("disabled").html(i18n.recortar).removeClass("loading")},success:function(e){if(openNotification({layout:"top",text:e.message,type:e.classe}),e.status){var t=(new Date).getTime();$('.imageOlds .template-upload[data-id="'+$("#modal-crop").prop("data-id")+'"] .preview img').attr("src",e.image+"&"+t),$('.imageOlds .template-upload[data-id="'+$("#modal-crop").prop("data-id")+'"] .config-file-close').trigger("click"),$("#modal-crop .close").trigger("click")}}})})},i.prototype.menu=function(){$(".company-config-dropdown ul li").on("click",function(){$.ajax({type:"POST",url:site_url+"comum/choose_company",data:{id:$(this).data("id")},dataType:"json",success:function(t){t.status&&(e.location.href=e.location.href.replace(site_url,site_url+t.lang+"/"))}})}),$("#menu-config-company > div.pull-left").on("click",function(){$(".menu-config-dropdown").stop().hide("slow"),$(".company-config-dropdown").stop().toggle("slow")}),$("#menu-config > span").on("click",function(){$(".company-config-dropdown").stop().hide("slow"),$(".menu-config-dropdown").stop().toggle("slow")}),$("#toggle-sidebar").on("click",function(){$("#menu-left").hasClass("hidden")?($("#menu-left").removeClass("hidden").removeClass("hidden-xs"),$(".containerWithSidebar, footer").removeClass("menu-off").addClass("menu-on")):($(".containerWithSidebar, footer").removeClass("menu-on").addClass("menu-off"),$("#menu-left").addClass("hidden"))}),$(".menu-action-language span").on("click",function(){$(".menu-action-language ul").toggleClass("hide show")}),$("#menu-list").mCustomScrollbar({axis:"x"})},i.prototype.sidebar=function(){var t=this;$.expr[":"].icontains=function(e,i,a,n){return(e.textContent||e.innerText||jQuery(e).text()||"").toLowerCase().indexOf(a[3].toLowerCase())>=0||t.urlSlug(e.innerText,{delimiter:" "}).indexOf(a[3].toLowerCase())>=0};var i=$("#menu-list"),a=$("#menu-no-modules");i.find(".collapse-in").addClass("original"),$("#sidebar-search").on("keyup","input",function(e){if(-1!==$.inArray(e.keyCode,[9,16,38,40]))return!1;var t=$(this).val();if(a.addClass("hidden"),t.length>0){i.find("ul, li").hide();var n=i.find("span").filter(":icontains("+t+")");n.show().parentsUntil("#menu-list").filter("li,ul").show().find(".hasSubmenu").addClass("collapse-in").children("ul").show(),n.closest("li").filter(".hasSubmenu").find("ul, li").show(),n.length||a.removeClass("hidden")}else i.find("li").removeClass("collapse-in").show(),i.find("ul").hide(),i.find(".original").children(".subMenuFather").siblings("ul").css("display","block").parent().addClass("collapse-in");i.mCustomScrollbar("update")}).on("keydown","input",function(e){40==e.keyCode?(e.preventDefault(),i.find("a").filter(":visible:first").trigger("focus")):38==e.keyCode&&(e.preventDefault(),i.find("a").filter(":visible:last").trigger("focus"))}).on("submit",function(e){e.preventDefault()}),i.find("a").on("focus",function(){if(!$(this).is(":active")){$(this).addClass("unreal-focus").on("keydown.kbNavigate",function(e){var t=0,a=!1;40==e.keyCode?(e.preventDefault(),i.find("a:visible").each(function(){if(!1!==a)return!1;t++,$(this).hasClass("unreal-focus")&&(a=t)}),i.find("a").filter(":visible:eq("+t+")").length?i.find("a").filter(":visible:eq("+t+")").trigger("focus"):$("#sidebar-search").find("input").focus()):38==e.keyCode&&(e.preventDefault(),i.find("a:visible").each(function(){if(!1!==a)return!1;$(this).hasClass("unreal-focus")?(a=t,t--):t++}),0==a?$("#sidebar-search").find("input").focus():i.find("a").filter(":visible:eq("+t+")").trigger("focus"))});var t=$(e).scrollTop();$("#menu-list").mCustomScrollbar("scrollTo",$(this).offset().top-t-($("#menu-list").offset().top-t)-($("#menu-list .mCSB_container").offset().top-t))}}).on("blur",function(){$(this).removeClass("unreal-focus").off("keydown.kbNavigate")}),"home"==module&&$("#sidebar-search").find("input").focus()},i.prototype.formFilter=function(){$("#form_filter").length>0&&$("#form_filter").on("submit",function(){var e=$(this).find('[type="submit"].btn-primary');e.length&&e.attr("disabled","disabled").html('<i class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></i>').addClass("loading")})},i.prototype.validateSubmitForm=function(){$("#validateSubmitForm").length>0&&($.validator.setDefaults({submitHandler:function(e){if(!0===$(e).data("sending")||$(e).hasClass("sending"))return!1;$(e).addClass("sending").data("sending",!0);var t=$(e).find('[type="submit"]');if(t.data("original",t.html()),t.attr("disabled","disabled").html('<i class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></i>').addClass("loading"),$(".required-image").length>0)if($("form").find($(".required-image")).find($(".img-holder")).length>0){var i={layout:"top",text:i18n.campos_obrigatorios,type:"error"};openNotification(i),$(e).data("sending",!1),t.html(t.data("original")).removeClass("btn-success btn-stroke").addClass("btn-primary").removeAttr("disabled")}else $.each(files,function(e,t){t.submit()}),sendForm(e);else files.length>0&&$.each(files,function(e,t){t.submit()}),sendForm(e)},showErrors:function(e,t){sendFormError(this,t)}}),$("#validateSubmitForm").validate({rules:"",ignore:[],invalidHandler:function(e,t){t.numberOfInvalids()&&openNotification({layout:"top",text:i18n.campos_obrigatorios,type:"error"})}}))},i.prototype.deleteRegisters=function(t,i){$("body").off("click",".delete-button button"),$("body").on("click",".delete-button button",function(a){a.preventDefault(),a.stopPropagation();var n=$(this).closest("a").attr("href"),o=$(this).closest("table"),r=$(this).closest("a");bootbox.confirm(i18n.efetuar_exclusao,function(a){a&&(r.hasClass("no-ajax")?e.location=n:$.ajax({type:"POST",url:n,data:{delete:"true",images:t,galleries:i},dataType:"json",success:function(e){if(openNotification({layout:"top",text:e.message,type:e.classe}),e.status&&"success"==e.classe){var t=n.split("/").pop();o.find('tr[data-id="'+t+'"]').css("position","relative").fadeOut(1e3,function(){$(this).remove(),o.find("tr.selectable .checkbox :checked").length>0?o.nextAll(".row:eq(0)").find(".checkboxs_actions").removeClass("hide").show():o.nextAll(".row:eq(0)").find(".checkboxs_actions").hide(),updateDeleteForm(o)})}},error:function(e){openNotification({layout:"top",text:i18n.verifique_relacionamento,type:"error"})}}))})}),$("body").off("submit",".delete-all-form"),void 0!==t&&t.length>0&&$(".delete-all-form").append('<input type="hidden" name="images" value="'+t+'" />'),void 0!==i&&i.length>0&&$(".delete-all-form").append('<input type="hidden" name="galleries" value="'+i+'" />'),$("body").on("submit",".delete-all-form",function(e){e.preventDefault();var t=this,i=$(".table");self=$(this),bootbox.confirm(i18n.efetuar_exclusao,function(e){e&&(self.hasClass("no-ajax")?t.submit():$.ajax({type:"POST",url:$(t).attr("action"),data:$(t).serialize(),dataType:"json",success:function(e){openNotification({layout:"top",text:e.message,type:e.classe});var t,a=e.id?e.id.split(","):[url.split("/").pop()];for(t=0;t<=a.length;t++)a.hasOwnProperty(t)&&i.find('tr[data-id="'+a[t]+'"]').css("position","relative").fadeOut(1e3,function(){$(this).remove(),i.find("tr.selectable .checkbox :checked").length>0?i.nextAll(".row:eq(0)").find(".checkboxs_actions").removeClass("hide").show():i.nextAll(".row:eq(0)").find(".checkboxs_actions").hide(),updateDeleteForm(i)})},error:function(e){openNotification({layout:"top",text:i18n.verifique_relacionamento,type:"error"})}}))})})},i.prototype.select2=function(){$(".select2:not(.clonable)").length>0&&$(".select2:not(.clonable)").select2({width:"100%"})},i.prototype.notify=function(){$(".auto-notify").length>0&&(openNotification({layout:"top",text:$(".auto-notify").data("message"),type:$(".auto-notify").data("classe")}),$(".auto-notify").remove())},i.prototype.filter=function(){$("#filter-show, .filter-show").on("change",function(){$(this).closest("form").submit()})},i.prototype.pagination=function(){$(".pagination").on("click",".disabled > a",function(e){e.preventDefault(),e.stopPropagation()})},i.prototype.bootstrap=function(){$('[data-toggle="tooltip"]').length>0&&$('[data-toggle="tooltip"]').tooltip(),$(".datetimepicker").length>0&&$(".datetimepicker").datetimepicker({locale:"pt-br",format:"DD/MM/YYYY HH:mm"}),$(".yearpicker").length>0&&$(".yearpicker").datetimepicker({locale:"pt-br",format:"YYYY"}),$(".datepicker").length>0&&$(".datepicker").datetimepicker({locale:"pt-br",format:"DD/MM/YYYY"}),$(".timepicker").length>0&&$(".timepicker").datetimepicker({locale:"pt-br",format:"HH:mm"})},i.prototype.sortable=function(t){var i=this,t=void 0!==t?t:site_url+i.module+"/sort/";$("#sortable").sortable({axis:"y",update:function(i,a){var n=$(this).sortable("serialize");$.ajax({data:n+"&show="+$("#filter-show").val()+"&page="+($(".pagination").length?$(".pagination .active").text():1),dataType:"json",type:"POST",url:t,success:function(t){openNotification({layout:"top",text:t.message,type:t.classe}),t.status&&t.redirect&&setTimeout(function(){e.location=e.location.href},400)},error:function(e){openNotification({layout:"top",text:i18n.erro_ordem,type:"error"})}})}}),$("#sortable td").not(".moveSortable").mousedown(function(e){e.stopImmediatePropagation()})},i.prototype.sortPicker=function(){$("body").on("change",".sort-picker",function(e){$(this).siblings(".sort-picker").addClass("loading"),$(this).closest(".sort-form").submit()})},i.prototype.toggleStatus=function(e){var t=this,e=void 0!==e?e:site_url+t.module+"/active";$(".table .make-switch :checkbox").change(function(){$(this).parents().hasClass("tab-pane")||$.ajax({type:"POST",url:e,data:{id:$(this).parents("tr").data("id"),actived:$(this).is(":checked"),type:$(this).attr("name")},dataType:"json",success:function(e){openNotification({layout:"top",text:e.message,type:e.classe})}})})},i.prototype.upload=function(e,t){t=void 0===t?1e6:t;var i=this,a={formData:{id:$("#inputId").val(),gallerypath:"userfiles/"+i.module,gallerytype:"image",gallerytable:i.module,width:2e3,height:2e3,resize:!0},dataType:"json",autoUpload:!1,maxNumberOfFiles:2,previewMaxWidth:75,previewMaxHeight:75,previewCrop:!0,progress:function(e,t){var i=parseInt(t.loaded/t.total*100,10);$("#"+t.divId+" .progress .progress-bar").css("width",i+"%"),100==i&&setTimeout(function(){$("#"+t.divId+" .progress").removeClass("active"),$("#"+t.divId+" .progress .progress-bar").removeClass("progress-bar-info").addClass("progress-bar-success")},1e3)},send:function(e,t){if(!i.checkExtension(t))return $("#validateSubmitForm").length&&($("#validateSubmitForm").removeClass("sending").data("sending",!1),$("#validateSubmitForm").find('[type="submit"]').html($("#validateSubmitForm").find('[type="submit"]').data("original")).removeClass("loading").removeAttr("disabled")),!1;if($("#full-preloader").length){$("#full-preloader").stop(!0).slideDown(300);var a=$("#full-preloader").data("total");a=void 0===a?0:parseInt(a),a+=parseInt(t.total),$("#full-preloader").data("total",a)}},processalways:function(e,t){var i=t.files[0],a=$(this).closest(".upload-wrapper");if(/\.(php|html)$/i.test(i.name)){var n={layout:"top",text:i18n.o_arquivo+" '"+i.name+"' "+i18n.arquivo_nao_enviado+"\n PHP, HTML.",type:"error"};return openNotification(n),!1}if(void 0!==t.ext)if("!"==t.ext[0]){var o=new RegExp(t.ext.replace("!",""));if(o.test(i.name)){var n={layout:"top",text:i18n.o_arquivo+" '"+i.name+"' "+i18n.arquivo_nao_enviado_extensao,type:"error"};return openNotification(n),!1}}else{var o=new RegExp(t.ext);if(!o.test(i.name.toLowerCase())){var r=t.ext.replace(/\|/g,", ").toUpperCase(),n={layout:"top",text:i18n.o_arquivo+" '"+i.name+"' "+i18n.arquivo_nao_enviado+" "+r,type:"error"};return openNotification(n),!1}}t.autoUpload?processImage(t,$("#validateSubmitForm")):(t.divId=$(this).data("id"),$.each(files,function(e,i){if(t.divId==i.divId)return files.splice(e,1),!1}),a.find(".remove-image, .remove-archive").removeClass("hide"),a.find('input[type="checkbox"]').prop("checked",!1),"archive"==t.imgtype?(a.find(".download-archive").remove(),a.find(".archivePlaceholder").removeClass("pointer").html(t.files[0].name).attr("title",t.files[0].name)):"favicon"==t.imgtype?$("#validateSubmitForm").find("."+t.imgtype+" span").addClass("fa fa-file-image-o").html(""):(a.find("."+t.imgtype).html(t.files[0].preview),a.find("a.magnific").removeClass("magnific").prop("href","#")),files.push(t))},change:function(e,a){var n=$(this).fileupload("option");if($(this).hasClass("chunk")?$(this).fileupload("option",{maxChunkSize:t,formData:{id:n.formData.id,gallerypath:n.formData.gallerypath,gallerytype:n.formData.gallerytype,gallerytable:n.formData.gallerytable,galleryname:$(this).attr("name"),gallerychunk:!0,width:$(this).closest(".upload-wrapper").data("width"),height:$(this).closest(".upload-wrapper").data("height"),resize:$(this).closest(".upload-wrapper").data("resize")}}):$(this).fileupload("option",{maxChunkSize:0,formData:{id:n.formData.id,gallerypath:n.formData.gallerypath,gallerytype:n.formData.gallerytype,gallerytable:n.formData.gallerytable,galleryname:$(this).attr("name"),gallerychunk:!1,width:$(this).closest(".upload-wrapper").data("width"),height:$(this).closest(".upload-wrapper").data("height"),resize:$(this).closest(".upload-wrapper").data("resize")}}),!i.checkExtension(a))return!1},done:function(e,t){$.each(files,function(e,i){if(i.divId==t.divId)return i.textStatus=t.textStatus,!1}),t.jqXHR.responseJSON.status&&$("#validateSubmitForm").append('<input type="hidden" name="'+t.paramName+'" value="'+t.jqXHR.responseJSON.file_id+'" />'),sendForm($("#validateSubmitForm"))}},e=$.extend(!0,a,e);$(document).ready(function(){$(".fileuploadImage, .fileuploadArchive, .fileuploadVideo, .fileuploadAudio, .fileupload").length>0&&$(".fileuploadImage, .fileuploadArchive, .fileuploadVideo, .fileuploadAudio, .fileupload").each(function(){var i=$(this).hasClass("chunk");e.formData.galleryname=$(this).attr("name"),e.formData.gallerychunk=i,e.maxChunkSize=i?t:0,$(this).hasClass("fileuploadImage")&&(e.formData.gallerytype="image",$(".fileuploadImage").each(function(t){e.formData.width=$(this).closest(".upload-wrapper").data("width"),e.formData.height=$(this).closest(".upload-wrapper").data("height"),e.formData.resize=$(this).closest(".upload-wrapper").data("resize"),e.formData.gallerytype="image",$(this).fileupload(e)})),$(this).hasClass("fileuploadArchive")&&(e.formData.gallerytype="archive"),$(this).hasClass("fileuploadVideo")&&(e.formData.gallerytype="video"),$(this).hasClass("fileuploadAudio")&&(e.formData.gallerytype="audio"),$(this).fileupload(e)}),$(".fileupload").length>0&&$(".fileupload").fileupload(e)}),$("body").on("click",".upload-image",function(e){$(this).hasClass("magnific")||$(this).siblings(".fileuploadImage").trigger("click")}),this.removeImage(),$(".archivePlaceholder").click(function(){$(this).closest(".upload-wrapper").find("label.alinhamento").trigger("click")}),$(".upload-archive .remove-archive").length>0&&$(".upload-archive .remove-archive").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).closest(".upload-archive"),i=t.find('input[type="file"]').attr("name");$.each(files,function(e,t){if(i==t.divId)return files.splice(e,1),!1}),$(this).addClass("hide"),t.find('input[type="checkbox"]').prop("checked",!0),t.find(".download-archive").remove(),t.find(".archivePlaceholder").addClass("pointer").html(i18n.selecione_arquivo).attr("title",i18n.selecione_arquivo)})},i.prototype.gallery_video=function(){
function e(e){return e.id?$("<span><img class='img-flag' src='"+base_img+"/"+$(e.element).data("image")+"'/> "+e.text+"</span>"):e.text}if($(".video-gallery").length>0){$(".video-language").length>0&&$(".video-language").select2({templateResult:e,templateSelection:e});var t;$.ajax({type:"POST",url:site_url+"comum/get_video_template",dataType:"html",success:function(e){t=e}}),$(".more-video").click(function(i){i.preventDefault(),i.stopPropagation();var a=$(this).closest(".video-gallery"),n=a.find(".add-videos"),o=n.find("li:last-child").data("seq")+1;o=o||0;var r=t;r=r.replace(new RegExp("{key}","g"),o),n.append(r),$(".video-language").length>0&&$(".video-language:last").select2({templateResult:e,templateSelection:e})}),$(".add-videos").on("click",".remove-videos",function(){$(this).closest(".group-remove-videos").remove()})}},i.prototype.getZipcode=function(e){$("body").on("keyup",'input[name*="zipcode"]',function(){var t=$(this).val().replace(/\D/g,""),i=$(this);if(8==t.length&&t!=i.data("old")){i.data("old",t),i.parent().addClass("searching");var a=i.closest(".address-container");$.post(site_url+"comum/get-cep",{cep:t},function(t){if(1==t.resultado){a.find('[name*="id_city"]').data("auto",t.cidade),a.find('[name*="address"]').val(t.tipo_logradouro+" "+t.logradouro);var n="";a.find('[name*="id_state"] > option').each(function(e,i){if(this.text.substr(0,2)==t.uf)return n=$(i).attr("value"),$(i).attr("selected",!0),!1}),a.find('[name*="id_state"]').val(n).trigger("change"),a.find('[name*="district"]').val(t.bairro),a.find('[name*="number"]').focus(),"function"==typeof e&&e(t)}i.parent().removeClass("searching")})}})},i.prototype.changePassword=function(){$("body").on("click",".change-password",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("href"),i=$("#ajax-modal");i.load(t,function(){i.modal()})}),$("body").on("submit",".change-password-modal",function(e){e.preventDefault();var t=$(this),i=t.prop("action");t.find("#inputId").val();$.ajax({type:"POST",url:i,dataType:"json",data:$(".change-password-modal").serialize(),success:function(e){openNotification({layout:"top",text:e.message,type:e.classe}),e.status&&t.closest(".modal-content").find(".close").trigger("click")},error:function(e){openNotification({layout:"top",text:i18n.verifique_relacionamento,type:"error"})}})})},i.prototype.urlSlug=function(e,t){e=String(e),t=Object(t);var i={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var a in i)t.hasOwnProperty(a)||(t[a]=i[a]);var n={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Ş":"S","İ":"I","Ç":"C","Ü":"U","Ö":"O","Ğ":"G","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"o","Ś":"S","Ź":"Z","Ż":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"};for(var a in t.replacements)e=e.replace(RegExp(a,"g"),t.replacements[a]);if(t.transliterate)for(var a in n)e=e.replace(RegExp(a,"g"),n[a]);var o="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return e=e.replace(o,t.delimiter),e=e.replace(RegExp("["+t.delimiter+"]{2,}","g"),t.delimiter),e=e.substring(0,t.limit),e=e.replace(RegExp("(^"+t.delimiter+"|"+t.delimiter+"$)","g"),""),t.lowercase?e.toLowerCase():e},i.prototype.checkExtension=function(e){var t=e.files[0],i=$("#"+e.fileInput[0].id);ext=i.data("ext");var a=new RegExp(ext);if(i.hasClass("fileuploadVideo")&&!a.test(t.name)){return openNotification({layout:"top",text:"O arquivo '"+t.name+"' não será enviado.\n\nVocê pode enviar arquivos com extensão:\n"+ext.toLowerCase()+".",type:"error"}),!1}return!0},i.prototype.changeState=function(){$('[name*="id_state"]').on("change",function(){var e=$(this).val(),t=$(this).parents(".tab-content").find('[name*="id_city"]'),i=!!t.data("selected")&&t.data("selected");if(!e||void 0==e)return!1;$.ajax({url:site_url+"comum/get_cities",dataType:"JSON",type:"POST",data:{id_state:e},success:function(e){if(e.status){for(var a=e.cities,n="",o=0;o<a.length;o++)i&&a[o].id==i?n+='<option value="'+a[o].id+'" selected>'+a[o].name+"</option>":n+='<option value="'+a[o].id+'">'+a[o].name+"</option>";t.html(n),t.removeAttr("disabled"),t.select2("destroy"),t.select2({width:"100%"})}}})}).change()},i.prototype.modal=function(){var e=this,t=$("#ajax-modal");$(".chamaModal").on("click",function(){var i=$(this).closest("tr").data("id");t.load(site_url+e.module+"/visualizar",{id:i},function(){t.modal()})})},i.prototype.clonable=function(e){var t={container:null,list:null,beforeClone:function(){return!0},afterClone:function(e,t){},afterRemove:function(){}},i=!1;if($.extend(t,e),t.list&&0!=t.list.length&&t.container&&0!=t.container.length){var a=t.list.find("li.hidden");a.removeClass("hidden"),i=a[0].outerHTML,a.remove(),t.container.on("click",".add-clonable",function(e){if(e.preventDefault(),e.stopPropagation(),"function"==typeof t.beforeClone){if(!t.beforeClone.apply(t.list))return!1}var a=t.list.find("li:last-child").data("seq")+1,n=i;a=isNaN(a)?0:a,n=n.replace(new RegExp("{key}","g"),a),t.list.append(n),n=t.list.find("li:last-child"),n.removeClass("hidden"),t.container.find(".no-items").addClass("hidden"),"function"==typeof t.afterClone&&t.afterClone.apply(t.list,[n,a])}),t.container.on("click",".remove-clonable",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest("li").remove(),0==t.list.find("li").length&&t.container.find(".no-items").removeClass("hidden"),"function"==typeof t.afterRemove&&t.afterRemove.apply(t.list)})}},i.prototype.initTable=function(){$("[data-table]").each(function(){new t(this)})},i.prototype.pastePlainText=function(){$(document).on("paste","input, textarea",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})},e.Comum=new i}(window);var files=[],Main=function(){"use strict";Main.prototype.init=function(){},Main.prototype.tools={minH:0,minW:960,ww:$(window).width(),wh:$(window).height(),vw:function(e){return e||(this.ww<this.minW?this.minW:this.ww)},vh:function(e){return e||(this.wh<this.minH?this.minH:this.wh)},getOffset:function(){return window.pageYOffset?window.pageYOffset:document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop},theMouseWheel:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},disable_scroll:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",this.theMouseWheel,!1),window.onmousewheel=document.onmousewheel=this.theMouseWheel},enable_scroll:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",this.theMouseWheel,!1),window.onmousewheel=document.onmousewheel=null},loadAnyImg:function(e,t){var i=new Image;i.onload=new function(){if("function"==typeof t)return t()},i.src=e}},this.init()};