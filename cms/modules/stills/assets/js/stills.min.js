"use strict";var Stills=$(function(){function t(){if(!(this instanceof t))return new t;this.init(),this.submit(),this.upload_events()}var e=[];return t.prototype.constructor=t,t.prototype.init=function(){var t=$("#form");t.find("[name=id]").val()},t.prototype.upload_events=function(){var t=this;$(".btn-upload").on("click",function(t){t.preventDefault(),$(this).parent().find(".upload-input").trigger("click")}),$(".upload-container").on("click",".del-image",function(t){t.preventDefault(),$(this).parents(".upload-container").find(".upload-input").val(""),$(this).parent().remove()}),$(".upload-input").on("change",function(){var e=this.files;$(this).attr("multiple")||$(this).parents(".upload-container").find(".imagesUpload div").remove(),t.uploadFile(e,this)})},t.prototype.uploadFile=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];e.push(a);var o=e.length-1,r=/image.*/;if(a.type.match(r)){$(n).prop("files",t);var s=document.createElement("img");s.file=a;var l=new FileReader;l.onload=function(t,e){return function(i){t.src=i.target.result;var a=document.createElement("div");$(a).append(t),$(a).append('<span class="del-image" data-idx="'+e+'"><i class="ti-close"></i><span>'),$(n).parents(".upload-container").find(".imagesUpload").append(a),$(t).fadeIn()}}(s,o),l.readAsDataURL(a)}}},t.prototype.submit=function(){$("#form").submit(function(t){t.preventDefault();var e=$(this),n=e.data("ctr"),i=new FormData(e[0]);$.ajax({url:site_url+"stills/"+n,data:i,processData:!1,contentType:!1,type:"POST",success:function(t){if(console.log(t),t.status)alert("salvo"),window.location.href=site_url+"stills/index";else for(item in t.response)alert(t.response[item])},error:function(){alert("Error posting feed.")}})})},t}());